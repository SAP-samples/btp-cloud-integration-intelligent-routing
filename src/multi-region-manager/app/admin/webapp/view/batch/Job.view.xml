<mvc:View controllerName="com.sap.region.manager.ui.controller.batch.Job" xmlns="sap.uxap" xmlns:m="sap.m" xmlns:layout="sap.ui.layout" xmlns:mvc="sap.ui.core.mvc" xmlns:l="sap.ui.layout" xmlns:smarttable="sap.ui.comp.smarttable" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form">
	<ObjectPageLayout id="ObjectPageLayout" beforeNavigate="onBeforeNavigate">
		<headerTitle>
			<ObjectPageHeader objectTitle="{JOB_INSTANCE/JOB_NAME}">
				<actions>
					<ObjectPageHeaderActionButton text="Take Action" icon="sap-icon://refresh" tooltip="action" press="onRefresh" />
				</actions>
			</ObjectPageHeader>
		</headerTitle>
		<headerContent>
			<layout:VerticalLayout>
				<m:ObjectAttribute title="Job Id" text="{JOB_EXECUTION_ID}" active="false" />
				<m:ObjectAttribute title="Instance Id" text="{JOB_INSTANCE_ID}" />
			</layout:VerticalLayout>
			<layout:VerticalLayout>
				<m:ObjectAttribute title="Start Time" text="{ path: 'START_TIME', type: 'sap.ui.model.type.DateTime', formatOptions: { style: 'medium'}}" />
				<m:ObjectAttribute title="End Time" text="{ path: 'END_TIME', type: 'sap.ui.model.type.DateTime', formatOptions: { style: 'medium'}}" />
			</layout:VerticalLayout>
			<layout:VerticalLayout>
				<m:ObjectAttribute title="Duration" text="{parts: [ { path : 'START_TIME' } , { path : 'END_TIME'} ], formatter : '.formatter.batchDuration'}" />
				<m:ObjectAttribute title="" text="{JOB_EXECUTION_DESC}" />
			</layout:VerticalLayout>
			<layout:VerticalLayout>
				<m:ObjectStatus title="Status" text="{STATUS}" icon="{path: 'STATUS', formatter : '.formatter.batchStateIcon'}" state="{path: 'STATUS', formatter : '.formatter.batchState'}" />	
			</layout:VerticalLayout>
			
		</headerContent>
		<sections>
			<ObjectPageSection titleUppercase="false" title="Exit Message">
				<subSections>
					<ObjectPageSubSection titleUppercase="false">
						<blocks>
							<m:ScrollContainer height="50%" width="100%" vertical="true" focusable="true">
								<m:Text text="{EXIT_MESSAGE}" growing="true" width="100%" />
							</m:ScrollContainer>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
			<ObjectPageSection titleUppercase="false" title="Steps">
				<subSections>
					<ObjectPageSubSection titleUppercase="false">
						<blocks>
							<smarttable:SmartTable class="sapUiSmallMargin" id="batchStepSmartTable" entitySet="BatchStepExecution" initialNoDataText="{i18n>jobNoDataText}" header="{i18n>jobHeader}" useTablePersonalisation="true" enableAutoBinding="true" useExportToExcel="false" demandPopin="true" beforeRebindTable="onRebindInvTable" ignoreFromPersonalisation="" requestAtLeastFields="STEP_EXECUTION_ID,STEP_NAME,START_TIME,END_TIME,STATUS,EXIT_CODE,READ_COUNT,WRITE_COUNT" >
								
								<smarttable:customToolbar>
									<m:OverflowToolbar design="Transparent">
										<m:ToolbarSpacer />
										<!-- <m:Button icon="sap-icon://refresh" tooltip="Refresh" press="onRefreshUpload" /> -->
									</m:OverflowToolbar>
								</smarttable:customToolbar>
								<m:Table id="batchSteptable" width="auto" noDataText="{oViewModel>/tableNoDataText}" busyIndicatorDelay="{oViewModel>/tableBusyDelay}" growing="true" growingThreshold="50" growingScrollToLoad="true" updateFinished=".onUpdateFinished">
									<m:columns>
										<m:Column popinDisplay="Inline" width="10%" minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "JOB_EXECUTION_ID","maxLength": "5", "columnIndex":"1","sortProperty": "JOB_EXECUTION_ID","filterProperty":"JOB_EXECUTION_ID"}' />
											</m:customData>
											<m:Text text="Step Execution Id" />
										</m:Column>
										<m:Column popinDisplay="Inline" width="20%" minScreenWidth="Tablet" demandPopin="true" hAlign="Left">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "JOB_INSTANCE/JOB_NAME", "maxLength": "10","columnIndex":"2","sortProperty": "JOB_INSTANCE/JOB_NAME","filterProperty":"JOB_INSTANCE/JOB_NAME", "type": "String"}' />
											</m:customData>
											<m:Text text="Name" />
										</m:Column>
										<m:Column popinDisplay="Inline" minScreenWidth="Tablet" demandPopin="true" hAlign="Left">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "START_TIME", "maxLength": "10","columnIndex":"3","sortProperty": "START_TIME","filterProperty":"START_TIME", "type": "String"}' />
											</m:customData>
											<m:Text text="Started At" />
										</m:Column>
										<m:Column popinDisplay="Inline" minScreenWidth="Tablet" demandPopin="true" hAlign="Left">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "END_TIME", "maxLength": "10","columnIndex":"4","sortProperty": "END_TIME","filterProperty":"END_TIME", "type": "String"}' />
											</m:customData>
											<m:Text text="Duration" />
										</m:Column>
										<m:Column popinDisplay="Inline" minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "READ_COUNT", "maxLength": "10","columnIndex":"5","sortProperty": "READ_COUNT","filterProperty":"READ_COUNT", "type": "String"}' />
											</m:customData>
											<m:Text text="Read Count" />
										</m:Column>
										<m:Column popinDisplay="Inline" minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "WRITE_COUNT", "maxLength": "10","columnIndex":"6","sortProperty": "WRITE_COUNT","filterProperty":"WRITE_COUNT", "type": "String"}' />
											</m:customData>
											<m:Text text="Write Count" />
										</m:Column>
										<m:Column popinDisplay="Inline" width="13%" minScreenWidth="Tablet" demandPopin="true" hAlign="Left">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "STATUS", "maxLength": "10","columnIndex":"7","sortProperty": "STATUS","filterProperty":"STATUS", "type": "String"}' />
											</m:customData>
											<m:Text text="Status" />
										</m:Column>
										<!-- <m:Column popinDisplay="Inline" width="13%" minScreenWidth="Tablet" demandPopin="true" hAlign="Left">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "EXIT_CODE", "maxLength": "10","columnIndex":"8","sortProperty": "EXIT_CODE","filterProperty":"EXIT_CODE", "type": "String"}' />
											</m:customData>
											<m:Text text="Exit Code" />
										</m:Column> -->
										
										<m:Column width="5rem" popinDisplay="Block" demandPopin="false" hAlign="Center">
											<m:customData>
												<core:CustomData key="p13nData" value='\{"columnKey": "action", "columnIndex":"10"}' />
											</m:customData>
											<m:Text text="" />
										</m:Column>
									</m:columns>
									<m:items>
										<m:ColumnListItem type="Active">
											<m:cells>
												<m:Text text="{STEP_EXECUTION_ID}" />
												<m:Text text="{STEP_NAME}" />
												<m:Text text="{ path: 'START_TIME', type: 'sap.ui.model.type.DateTime', formatOptions: { style: 'medium'}}" />
												<m:Text text="{parts: [ { path : 'START_TIME' } , { path : 'END_TIME'} ], formatter : '.formatter.batchDuration'}" />
												<m:Text text="{READ_COUNT}" />
												<m:Text text="{WRITE_COUNT}" />
												<!-- <Text text="{ path: 'END_TIME', type: 'sap.ui.model.type.DateTime', formatOptions: { style: 'medium'}}" /> -->
												<m:ObjectStatus inverted="true" text="{STATUS}" icon="{path: 'STATUS', formatter : '.formatter.batchStateIcon'}" state="{path: 'STATUS', formatter : '.formatter.batchState'}" />
												<!-- <m:ObjectStatus inverted="true" text="{EXIT_CODE}" icon="{path: 'EXIT_CODE', formatter : '.formatter.batchStateIcon'}" state="{path: 'EXIT_CODE', formatter : '.formatter.batchState'}" /> -->
												
												<m:FlexBox alignItems="Start" justifyContent="End">
													<!-- <m:HBox>
														<m:Button type="Transparent" press="onStop" icon="sap-icon://stop" iconFirst="true" visible="{parts: [ { path : 'STATUS' } , { path : 'EXIT_CODE'} ], formatter : '.formatter.batchStopAction'}" />
														<m:Button type="Transparent" press="onRestart" icon="sap-icon://restart" iconFirst="true" visible="{parts: [ { path : 'STATUS' } , { path : 'EXIT_CODE'} ], formatter : '.formatter.batchRestartAction'}" />
													</m:HBox> -->
													<m:Button type="Transparent" press="onObjectShow" icon="sap-icon://navigation-right-arrow" iconFirst="true" visible="true" />													
												</m:FlexBox>
											</m:cells>
										</m:ColumnListItem>
									</m:items>
								</m:Table>
							</smarttable:SmartTable>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
			<ObjectPageSection titleUppercase="false" title="Context">
				<subSections>
					<ObjectPageSubSection titleUppercase="false">
						<blocks>
							<m:ScrollContainer height="50%" width="100%" vertical="true" focusable="true">
								<m:Text id="jobContext" text="{SHORT_CONTEXT}" growing="true" width="100%" />
							</m:ScrollContainer>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
		</sections>
	</ObjectPageLayout>

</mvc:View>